/*! 
 * jQuery Steps v1.1.0 - 09/04/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-steps.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */(function(s,F){s.fn.extend({_aria:function(e,n){return this.attr("aria-"+e,n)},_removeAria:function(e){return this.removeAttr("aria-"+e)},_enableAria:function(e){return e==null||e?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(e){return e==null||e?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(e){return e==null||e?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(e){return e?this.attr("id",e):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var e=arguments.length===1&&s.isArray(arguments[0])?arguments[0]:arguments,n=this,t=0;t<e.length;t++){var r=new RegExp("\\{"+t+"\\}","gm");n=n.replace(r,e[t])}return n});var q=0,R="jQu3ry_5teps_St@te_",E="-t-",y="-p-",x="-h-",k="Index out of range.",G="One or more corresponding step {0} are missing.";function ee(e,n){S(e).push(n)}function ne(e,n,t){var r=e.children(n.headerTag),a=e.children(n.bodyTag);r.length>a.length?h(G,"contents"):r.length<a.length&&h(G,"titles");var i=n.startIndex;if(t.stepCount=r.length,n.saveState&&s.cookie){var l=s.cookie(R+m(e)),o=parseInt(l,0);!isNaN(o)&&o<t.stepCount&&(i=o)}t.currentIndex=i,r.each(function(f){var c=s(this),u=a.eq(f),d=u.data("mode"),I=d==null?v.html:A(v,/^\s*$/.test(d)||isNaN(d)?d:parseInt(d,0)),_=I===v.html||u.data("url")===F?"":u.data("url"),j=I!==v.html&&u.data("loaded")==="1",Q=s.extend({},z,{title:c.html(),content:I===v.html?u.html():"",contentUrl:_,contentMode:I,contentLoaded:j});ee(e,Q)})}function te(e){e.triggerHandler("canceled")}function re(e,n){return e.currentIndex-n}function ae(e,n){var t=N(e);e.unbind(t).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(t),e.removeClass(n.clearFixCssClass+" vertical");var r=e.find(".content > *");r.removeData("loaded").removeData("mode").removeData("url"),r.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),e.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var a=s('<{0} class="{1}"></{0}>'.format(e.get(0).tagName,e.attr("class"))),i=e._id();return i!=null&&i!==""&&a._id(i),a.html(e.find(".content").html()),e.after(a),e.remove(),a}function J(e,n){var t=e.find(".steps li").eq(n.currentIndex);e.triggerHandler("finishing",[n.currentIndex])?(t.addClass("done").removeClass("error"),e.triggerHandler("finished",[n.currentIndex])):t.addClass("error")}function N(e){var n=e.data("eventNamespace");return n==null&&(n="."+m(e),e.data("eventNamespace",n)),n}function b(e,n){var t=m(e);return e.find("#"+t+E+n)}function M(e,n){var t=m(e);return e.find("#"+t+y+n)}function ie(e,n){var t=m(e);return e.find("#"+t+x+n)}function g(e){return e.data("options")}function p(e){return e.data("state")}function S(e){return e.data("steps")}function D(e,n){var t=S(e);return(n<0||n>=t.length)&&h(k),t[n]}function m(e){var n=e.data("uid");return n==null&&(n=e._id(),n==null&&(n="steps-uid-".concat(q),e._id(n)),q++,e.data("uid",n)),n}function A(e,n){if($("enumType",e),$("keyOrValue",n),typeof n=="string"){var t=e[n];return t===F&&h("The enum key '{0}' does not exist.",n),t}else if(typeof n=="number"){for(var r in e)if(e[r]===n)return n;h("Invalid enum value '{0}'.",n)}else h("Invalid key or value type.")}function B(e,n,t){return Y(e,n,t,le(t,1))}function P(e,n,t){return Y(e,n,t,re(t,1))}function se(e,n,t,r){if((r<0||r>=t.stepCount)&&h(k),!(n.forceMoveForward&&r<t.currentIndex)){var a=t.currentIndex;return e.triggerHandler("stepChanging",[t.currentIndex,r])?(t.currentIndex=r,O(e,n,t),L(e,n,t,a),T(e,n,t),X(e,n,t),me(e,n,t,r,a,function(){e.triggerHandler("stepChanged",[r,a])})):e.find(".steps li").eq(a).addClass("error"),!0}}function le(e,n){return e.currentIndex+n}function oe(e){var n=s.extend(!0,{},be,e);return this.each(function(){var t=s(this),r={currentIndex:n.startIndex,currentStep:null,stepCount:0,transitionElement:null};t.data("options",n),t.data("state",r),t.data("steps",[]),ne(t,n,r),ve(t,n,r),de(t,n),n.autoFocus&&q===0&&b(t,n.startIndex).focus(),t.triggerHandler("init",[n.startIndex])})}function W(e,n,t,r,a){(r<0||r>t.stepCount)&&h(k),a=s.extend({},z,a),ue(e,r,a),t.currentIndex!==t.stepCount&&t.currentIndex>=r&&(t.currentIndex++,O(e,n,t)),t.stepCount++;var i=e.find(".content"),l=s("<{0}>{1}</{0}>".format(n.headerTag,a.title)),o=s("<{0}></{0}>".format(n.bodyTag));return(a.contentMode==null||a.contentMode===v.html)&&o.html(a.content),r===0?i.prepend(o).prepend(l):M(e,r-1).after(o).after(l),V(e,t,o,r),w(e,n,t,l,r),Z(e,n,t,r),r===t.currentIndex&&L(e,n,t),T(e,n,t),e}function ue(e,n,t){S(e).splice(n,0,t)}function fe(e){var n=s(this),t=g(n),r=p(n);if(t.suppressPaginationOnFocus&&n.find(":focus").is(":input"))return e.preventDefault(),!1;var a={left:37,right:39};e.keyCode===a.left?(e.preventDefault(),P(n,t,r)):e.keyCode===a.right&&(e.preventDefault(),B(n,t,r))}function X(e,n,t){if(t.stepCount>0){var r=t.currentIndex,a=D(e,r);if(!n.enableContentCache||!a.contentLoaded)switch(A(v,a.contentMode)){case v.iframe:e.find(".content > .body").eq(t.currentIndex).empty().html('<iframe src="'+a.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case v.async:var i=M(e,r)._aria("busy","true").empty().append(H(n.loadingTemplate,{text:n.labels.loading}));s.ajax({url:a.contentUrl,cache:!1}).done(function(l){i.empty().html(l)._aria("busy","false").data("loaded","1"),e.triggerHandler("contentLoaded",[r])});break}}}function Y(e,n,t,r){var a=t.currentIndex;if(r>=0&&r<t.stepCount&&!(n.forceMoveForward&&r<t.currentIndex)){var i=b(e,r),l=i.parent(),o=l.hasClass("disabled");return l._enableAria(),i.click(),a===t.currentIndex&&o?(l._enableAria(!1),!1):!0}return!1}function ce(e){e.preventDefault();var n=s(this),t=n.parent().parent().parent().parent(),r=g(t),a=p(t),i=n.attr("href");switch(i.substring(i.lastIndexOf("#")+1)){case"cancel":te(t);break;case"finish":J(t,a);break;case"next":B(t,r,a);break;case"previous":P(t,r,a);break}}function T(e,n,t){if(n.enablePagination){var r=e.find(".actions a[href$='#finish']").parent(),a=e.find(".actions a[href$='#next']").parent();if(!n.forceMoveForward){var i=e.find(".actions a[href$='#previous']").parent();i._enableAria(t.currentIndex>0)}n.enableFinishButton&&n.showFinishButtonAlways?(r._enableAria(t.stepCount>0),a._enableAria(t.stepCount>1&&t.stepCount>t.currentIndex+1)):(r._showAria(n.enableFinishButton&&t.stepCount===t.currentIndex+1),a._showAria(t.stepCount===0||t.stepCount>t.currentIndex+1)._enableAria(t.stepCount>t.currentIndex+1||!n.enableFinishButton))}}function L(e,n,t,r){var a=b(e,t.currentIndex),i=s('<span class="current-info audible">'+n.labels.current+" </span>"),l=e.find(".content > .title");if(r!=null){var o=b(e,r);o.parent().addClass("done").removeClass("error")._selectAria(!1),l.eq(r).removeClass("current").next(".body").removeClass("current"),i=o.find(".current-info"),a.focus()}a.prepend(i).parent()._selectAria().removeClass("done")._enableAria(),l.eq(t.currentIndex).addClass("current").next(".body").addClass("current")}function Z(e,n,t,r){for(var a=m(e),i=r;i<t.stepCount;i++){var l=a+E+i,o=a+y+i,f=a+x+i,c=e.find(".title").eq(i)._id(f);e.find(".steps a").eq(i)._id(l)._aria("controls",o).attr("href","#"+f).html(H(n.titleTemplate,{index:i+1,title:c.html()})),e.find(".body").eq(i)._id(o)._aria("labelledby",f)}}function de(e,n){var t=N(e);e.bind("canceled"+t,n.onCanceled),e.bind("contentLoaded"+t,n.onContentLoaded),e.bind("finishing"+t,n.onFinishing),e.bind("finished"+t,n.onFinished),e.bind("init"+t,n.onInit),e.bind("stepChanging"+t,n.onStepChanging),e.bind("stepChanged"+t,n.onStepChanged),n.enableKeyNavigation&&e.bind("keyup"+t,fe),e.find(".actions a").bind("click"+t,ce)}function pe(e,n,t,r){return r<0||r>=t.stepCount||t.currentIndex===r?!1:(he(e,r),t.currentIndex>r&&(t.currentIndex--,O(e,n,t)),t.stepCount--,ie(e,r).remove(),M(e,r).remove(),b(e,r).parent().remove(),r===0&&e.find(".steps li").first().addClass("first"),r===t.stepCount&&e.find(".steps li").eq(r).addClass("last"),Z(e,n,t,r),T(e,n,t),!0)}function he(e,n){S(e).splice(n,1)}function ve(e,n,t){var r='<{0} class="{1}">{2}</{0}>',a=A(U,n.stepsOrientation),i=a===U.vertical?" vertical":"",l=s(r.format(n.contentContainerTag,"content "+n.clearFixCssClass,e.html())),o=s(r.format(n.stepsContainerTag,"steps "+n.clearFixCssClass,'<ul role="tablist"></ul>')),f=l.children(n.headerTag),c=l.children(n.bodyTag);e.attr("role","application").empty().append(o).append(l).addClass(n.cssClass+" "+n.clearFixCssClass+i),c.each(function(u){V(e,t,s(this),u)}),f.each(function(u){w(e,n,t,s(this),u)}),L(e,n,t),ge(e,n,t)}function V(e,n,t,r){var a=m(e),i=a+y+r,l=a+x+r;t._id(i).attr("role","tabpanel")._aria("labelledby",l).addClass("body")._showAria(n.currentIndex===r)}function ge(e,n,t){if(n.enablePagination){var r='<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',a='<li><a href="#{0}" role="menuitem">{1}</a></li>',i="";n.forceMoveForward||(i+=a.format("previous",n.labels.previous)),i+=a.format("next",n.labels.next),n.enableFinishButton&&(i+=a.format("finish",n.labels.finish)),n.enableCancelButton&&(i+=a.format("cancel",n.labels.cancel)),e.append(r.format(n.actionContainerTag,n.clearFixCssClass,n.labels.pagination,i)),T(e,n,t),X(e,n,t)}}function H(e,n){for(var t=e.match(/#([a-z]*)#/gi),r=0;r<t.length;r++){var a=t[r],i=a.substring(1,a.length-1);n[i]===F&&h("The key '{0}' does not exist in the substitute collection!",i),e=e.replace(a,n[i])}return e}function w(e,n,t,r,a){var i=m(e),l=i+E+a,o=i+y+a,f=i+x+a,c=e.find(".steps > ul"),u=H(n.titleTemplate,{index:a+1,title:r.html()}),d=s('<li role="tab"><a id="'+l+'" href="#'+f+'" aria-controls="'+o+'">'+u+"</a></li>");d._enableAria(n.enableAllSteps||t.currentIndex>a),t.currentIndex>a&&d.addClass("done"),r._id(f).attr("tabindex","-1").addClass("title"),a===0?c.prepend(d):c.find("li").eq(a-1).after(d),a===0&&c.find("li").removeClass("first").eq(a).addClass("first"),a===t.stepCount-1&&c.find("li").removeClass("last").eq(a).addClass("last"),d.children("a").bind("click"+N(e),Ce)}function O(e,n,t){n.saveState&&s.cookie&&s.cookie(R+m(e),t.currentIndex)}function me(e,n,t,r,a,i){var l=e.find(".content > .body"),o=A(C,n.transitionEffect),f=n.transitionEffectSpeed,c=l.eq(r),u=l.eq(a);switch(o){case C.fade:case C.slide:var d=o===C.fade?"fadeOut":"slideUp",I=o===C.fade?"fadeIn":"slideDown";t.transitionElement=c,u[d](f,function(){var Ie=s(this)._showAria(!1).parent().parent(),K=p(Ie);K.transitionElement&&(K.transitionElement[I](f,function(){s(this)._showAria()}).promise().done(i),K.transitionElement=null)});break;case C.slideLeft:var _=u.outerWidth(!0),j=r>a?-_:_,Q=r>a?_:-_;s.when(u.animate({left:j},f,function(){s(this)._showAria(!1)}),c.css("left",Q+"px")._showAria().animate({left:0},f)).done(i);break;default:s.when(u._showAria(!1),c._showAria()).done(i);break}}function Ce(e){e.preventDefault();var n=s(this),t=n.parent().parent().parent().parent(),r=g(t),a=p(t),i=a.currentIndex;if(n.parent().is(":not(.disabled):not(.current)")){var l=n.attr("href"),o=parseInt(l.substring(l.lastIndexOf("-")+1),0);se(t,r,a,o)}if(i===a.currentIndex)return b(t,i).focus(),!1}function h(e){throw arguments.length>1&&(e=e.format(Array.prototype.slice.call(arguments,1))),new Error(e)}function $(e,n){n==null&&h("The argument '{0}' is null or undefined.",e)}s.fn.steps=function(e){if(s.fn.steps[e])return s.fn.steps[e].apply(this,Array.prototype.slice.call(arguments,1));if(typeof e=="object"||!e)return oe.apply(this,arguments);s.error("Method "+e+" does not exist on jQuery.steps")},s.fn.steps.add=function(e){var n=p(this);return W(this,g(this),n,n.stepCount,e)},s.fn.steps.destroy=function(){return ae(this,g(this))},s.fn.steps.finish=function(){J(this,p(this))},s.fn.steps.getCurrentIndex=function(){return p(this).currentIndex},s.fn.steps.getCurrentStep=function(){return D(this,p(this).currentIndex)},s.fn.steps.getStep=function(e){return D(this,e)},s.fn.steps.insert=function(e,n){return W(this,g(this),p(this),e,n)},s.fn.steps.next=function(){return B(this,g(this),p(this))},s.fn.steps.previous=function(){return P(this,g(this),p(this))},s.fn.steps.remove=function(e){return pe(this,g(this),p(this),e)},s.fn.steps.setStep=function(e,n){throw new Error("Not yet implemented!")},s.fn.steps.skip=function(e){throw new Error("Not yet implemented!")};var v=s.fn.steps.contentMode={html:0,iframe:1,async:2},U=s.fn.steps.stepsOrientation={horizontal:0,vertical:1},C=s.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},z=s.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:v.html,contentLoaded:!1},be=s.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:U.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:C.none,transitionEffectSpeed:200,onStepChanging:function(e,n,t){return!0},onStepChanged:function(e,n,t){},onCanceled:function(e){},onFinishing:function(e,n){return!0},onFinished:function(e,n){},onContentLoaded:function(e,n){},onInit:function(e,n){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}})(jQuery);
